<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<style type="text/css">
		body {
			padding: 0;
			margin: 0;
		}

		#container {
			display: flex;
			flex-wrap: wrap;
			border: 1px solid black;
		}

		#container div {
           border: 1px solid black;
		}

		.shooter {
			background: gray;
		}

	</style>
</head>
<body>
  <div id="container"></div>
  <script type="text/javascript"> 
    let container = document.getElementById("container");
    let size = 500;
    container.style.width = size + "px";
    container.style.height = size + "px";
    let boxSize = 25;
    let rowNumber = size / boxSize;
    let boxNumber = rowNumber * rowNumber;
    for (let i = 0;i < boxNumber;i++) {
      let div = document.createElement("div");
      div.style.width = boxSize - 2 + "px";
      div.style.height = boxSize - 2 + "px";
      container.appendChild(div);
    }
    let boxes = document.querySelectorAll("#container div");

    class Shooter {
    	constructor(grid_x,grid_y,body,faceAt) {
    		this.facingAt = faceAt;
    		this.body = body;
    		this.grid_x = grid_x;
    		this.grid_y = grid_y;
    	}

    	update_facingAt(body,faceTo) {
    		if (faceTo == this.facingAt) return;
    		this.body = body;
        this.facingAt = faceTo;
    	}

    	draw() {
    		for (let y = 0;y < this.body.length;y++) {
    			for (let x = 0;x < this.body[y].length;x++) {
    				if (this.body[y][x] == 1) {
              let index = this.grid_x + (this.grid_y * rowNumber) + x + (y * rowNumber);
              boxes[index].classList.add("shooter");
    				}
    			}
    		}
    	}

    	update() {
    		this.update_indexes();
    		this.draw();
    	}
    }
    let shooter = new Shooter(rowNumber - (rowNumber / 2),rowNumber - 3,[
         [0,1,0],
         [1,1,1],
         [1,0,1]
    	 ],"up");

    
    function clearScreen() {
    	for (let i = 0;i < boxes.length;i++) {
    		boxes[i].classList.remove("shooter")
    	}
    }

    function animate() {
      clearScreen();
      shooter.update();
      requestAnimationFrame(animate);
    }

    requestAnimationFrame(animate);
    
    window.onkeydown = function(event) {
    	switch (event.keyCode) {
         case 37:
         	shooter.update_facingAt([
         		[0,1,1],
         		[1,1,0],
         		[0,1,1]
         	],"left");
         	break;
         case 38:
         	shooter.update_facingAt([
         		[0,1,0],
         		[1,1,1],
         		[1,0,1]
         	],"up");
         	break;
         case 39:
         	shooter.update_facingAt([
         		[1,1,0],
         		[0,1,1],
         		[1,1,0]
         	],"right");
         	break;
         case 40:
         	shooter.update_facingAt([
         		[1,0,1],
         		[1,1,1],
         		[0,1,0]
         	],"down");
    	}
      function moveShooter() {
      	switch (shooter.facingAt) {
      	  case "left" :
      	  	shooter.grid_x--;
      	  	break;
      	  case "up" :
      	  	shooter.grid_y--;
      	  	break;
      	  case "right" :
      	  	shooter.grid_x++;
      	  	break;
      	  case "down" :
      	  	shooter.grid_y++;
      	  	break;
      	}
      }
      moveShooter();
    }

  </script>
</body>
</html>